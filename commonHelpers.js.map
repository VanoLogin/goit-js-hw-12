{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/helpers-btn.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = `https://pixabay.com`;\nconst API_KEY = '42128830-dc9c3845b3d280824a8228556';\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.params = {};\naxios.defaults.params['key'] = API_KEY;\n\nfunction getPictures({ queryValue, page = 1, perPage }) {\n  return axios.get('/api/', {\n    params: {\n      q: queryValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n}\n\nexport { getPictures };","function createGalleryCard(hits) {\n    return hits\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `<div class=\"photo-card\">\n     <a class=\"photo-card__link\" href=\"${largeImageURL}\"> <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>${likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>${views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>${comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>${downloads}\n        </p>\n      </div>\n    </div>`;\n        }\n      )\n      .join('');\n  }\n  export default function appendCards(hits, container) {\n    container.insertAdjacentHTML('beforeend', createGalleryCard(hits));\n  }","const loadBtn = document.querySelector('.load-more');\n\nconst hiddenClass = 'hidden';\n\nfunction show() {\n  loadBtn.classList.remove(hiddenClass);\n}\n\nfunction disable() {\n  loadBtn.disabled = true;\n  loadBtn.textContent = 'Loading...';\n}\nfunction hide() {\n  loadBtn.classList.add(hiddenClass);\n}\n\nfunction enable() {\n  loadBtn.disabled = false;\n  loadBtn.textContent = 'Load more';\n}\n\nexport default { show, hide, disable, enable };\n","import './css/styles.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Додатковий імпорт стилів\n\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nimport * as pixabayService from './js/pixabay-api.js';\nimport appendCards from './js/render-functions.js';\nimport buttonService from './js/helpers-btn.js';\n\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  galleryContainer: document.querySelector('.gallery'),\n  loadBtn: document.querySelector('.load-more'),\n  cssLoading: document.querySelector('.loader-container'),\n};\n\nconst queryParams = {\n  page: 1,\n  queryValue: '',\n  perPage: 15,\n};\n\nconst lightbox = new SimpleLightbox('.photo-card a');\n\nrefs.searchForm.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  refs.cssLoading.classList.remove('hidden');\n  refs.galleryContainer.innerHTML = '';\n  buttonService.hide();\n  queryParams.page = 1;\n  queryParams.queryValue =\n    event.currentTarget.elements.searchQuery.value.trim();\n\n  try {\n    const data = await fetchPictures();\n    if (data) {\n      iziToast.info({\n        position: 'topRight',\n        title: 'Info',\n        message: `Hooray! We found ${data.totalHits} images.`,\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  } finally {\n    refs.cssLoading.classList.add('hidden');\n    refs.loadBtn.addEventListener('click', handleLoadMore);\n    buttonService.show();\n    refs.searchForm.reset();\n  }\n}\n\nfunction handleLoadMore() {\n  buttonService.disable();\n  queryParams.page += 1;\n  refs.cssLoading.classList.remove('hidden');\n  fetchPictures().then(buttonService.enable);\n  refs.cssLoading.classList.add('hidden');\n}\nasync function fetchPictures() {\n  try {\n    const { data } = await pixabayService.getPictures(queryParams);\n    const allPages = Math.ceil(data.totalHits / queryParams.perPage);\n    console.log(allPages);\n    console.log(data);\n    if (data.hits.length === 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    }\n\n    appendCards(data.hits, refs.galleryContainer);\n    lightbox.refresh();\n    scrollToNextBatch();\n\n    if (data.totalHits <= queryParams.perPage) {\n      iziToast.info({\n        position: 'topRight',\n        title: 'Info',\n        message: `Hooray! We found ${data.totalHits} images.`,\n      });\n      refs.cssLoading.classList.add('hidden');\n\n      throw new Error(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    } else if (queryParams.page >= allPages) {\n      throw new Error(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n\n    return data;\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: `${error.message}`,\n    });\n    buttonService.hide();\n    return false;\n  }\n}\n\nfunction scrollToNextBatch() {\n  const cards = document.querySelectorAll('.photo-card');\n  if (cards.length > 0) {\n    // Отримуємо висоту однієї карточки\n    const cardHeight = cards[0].getBoundingClientRect().height;\n    // Прокручуємо на дві висоти карточки\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["BASE_URL","API_KEY","axios","getPictures","queryValue","page","perPage","createGalleryCard","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","appendCards","container","loadBtn","hiddenClass","show","disable","hide","enable","buttonService","refs","queryParams","lightbox","SimpleLightbox","handleSubmit","event","data","fetchPictures","iziToast","err","handleLoadMore","pixabayService.getPictures","allPages","scrollToNextBatch","error","cards","cardHeight"],"mappings":"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"}